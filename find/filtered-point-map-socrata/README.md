# Filtered Point Map with Socrata Open Data

*By [Veronica Armendar](introduction/contact.md), last updated May 5, 2015*

Both the State of Connecticut (<a href="http://data.ct.gov">http://data.ct.gov</a>) and the City of Hartford (<a href="http://data.hartford.gov">http://data.hartford.gov</a>) have launched open data portals on the <a href="http://www.socrata.com/" target="_blank">Socrata</a> platform, which creates user-friendly ways to view, export, and create visualizations on the web. Since "live" data on the Socrata site can be continuously updated by an administrator, new information in the data table will automatically appear in your map, which may be preferable to exporting "static" data into an external spreadsheet for a disconnected mapping tool. In this tutorial, we will create an interactive point map of selected schools from the Connecticut Education Directory in the state data portal, to demonstrate filtering, conditional formatting, visualization, and embedding features in Socrata. The final product will look like this:
<div class="web-only">[iframe width="625px" title="CT Schools Map" height="625px" src="https://data.ct.gov/w/shww-dhc6/wqz6-rhce?cur=vkPCQP4VYUQ&amp;from=root" frameborder="0" scrolling="no"&gt;&lt;a href="https://data.ct.gov/Education/CT-Schools-Map/shww-dhc6" title="CT Schools Map" target="_blank"&gt;CT Schools Map&lt;/a&gt;&lt;p&gt;&lt;a href="http://www.socrata.com/" target="_blank"&gt;Powered by Socrata&lt;/a&gt;&lt;/p&gt;]</div>
<div class="not-web">

[caption id="attachment_363" align="alignnone" width="632"]<a href="https://data.ct.gov/Education/CT-Schools-Map/shww-dhc6"><img src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/11/FilteredPointMapSocrata.png" alt="Click screenshot to view  interactive map." width="632" height="530" class="size-full wp-image-363" /></a> Click screenshot to view <a href="https://data.ct.gov/Education/CT-Schools-Map/shww-dhc6"> interactive map</a>.[/caption]

</div>
Create a free account on any Socrata platform. One account will work on all Socrata sites.

<a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap1.png"><img class="aligncenter size-full wp-image-302" alt="SocrataMap1" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap1.png" width="599" height="557" /></a>

Select your desired dataset in Socrata. In this tutorial, we will use CT Open Data &gt; Education &gt; CT Education Directory (<a href="https://data.ct.gov/Education/Education-Directory/9k2y-kqxn" target="_blank">https://data.ct.gov/Education/Education-Directory/9k2y-kqxn</a>). The data table must include a location column that includes geocoordinates. If there is address data but no geocoordinates, then post a suggestion to the Socrata site administrator to add a geocoded column.
<a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap2.png"><img class="aligncenter size-full wp-image-303" alt="SocrataMap2" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap2.png" width="624" height="538" /></a>

Filter the data to display only the desired rows. The CT Education Directory lists both district offices and school addresses, but for this map we only wish to display the latter. On the top-right corner of the table, click the Filter tab.
<a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap3.png"><img class="aligncenter size-full wp-image-304" alt="SocrataMap3" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap3.png" width="563" height="609" /></a>

Add a New Filter Condition, which displays only the rows you select. In this tutorial, select “Organization Type” and “is”, then type the exact name from the table, such as “Public Schools.” Be sure to type it correctly or the filter may not work. If you wish to select multiple types, add a new filter condition for each. In this tutorial, we also will filter for other types: Public Charter Schools, CT Technical High Schools, Regional Schools, State Agency Facilities, Endowed and Incorporated Academies Schools, and Regional Education Service Center Schools.
<a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap4.png"><img class="aligncenter size-full wp-image-305" alt="SocrataMap4" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap4.png" width="604" height="526" /></a>

Select the Visualize tab and choose Map, which will display several options. First, under Config for Education Direction, select Point Map as the Plot Style, and choose the Location column to identify the geocoordinates.
<a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap5.png"><img class="aligncenter size-full wp-image-314" alt="SocrataMap5" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap5.png" width="552" height="598" /></a>

Further below in the Visualize &gt; Map options, select the checkbox for Advanced Config for the Education Directory to edit the Flyout Details (similar to a pop-up information window) that displays details when users click on a map point. Select data items you wish to display, such as Title: Name, and additional Flyout Details: Organization Type, Location I, and Website. Further down, select the “w/o labels” checkbox to avoid displaying the column headers in your flyout details.
<a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap6.png"><img class="aligncenter size-full wp-image-306" alt="SocrataMap6" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap6.png" width="489" height="630" /></a>

In Visualize &gt; Map &gt; Base Maps, select your desired background map, such as Google Roadmap.
<a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap7.png"><img class="aligncenter size-full wp-image-307" alt="SocrataMap7" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap7.png" width="474" height="534" /></a>

Add a legend to display once you build the map. In the Advanced Configuration area, select the Legend Configuration checkbox and mark its position. After selecting all of these map options, click Apply. Socrata will generate your map with default point colors. Double-check to make sure your data appear, and that your Visualize settings are correct, before moving to the next step.
<a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap8.png"><img class="aligncenter size-full wp-image-308" alt="SocrataMap8" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap8.png" width="433" height="519" /></a>

Assign point colors and legend labels by returning to the Filter tab, and select Conditional Formatting. Understand the difference between these two features. Previously, we used Filter to display only selected types of data (in this case, school buildings, rather than district administrative offices). Now, we will use Conditional Formatting to assign color codes and labels to our filtered data.
<a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap9.png"><img class="aligncenter size-full wp-image-309" alt="SocrataMap9" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap9.png" width="557" height="576" /></a>

In the Conditional Formatting section, type a name into the Description that you wish to display in the legend. You may type a shorter name than the longer name that appears in the data table, such as “Charter Schools” instead of the longer “Public Charter Schools.” Also, select a color for each Description.
<a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap10.png"><img class="aligncenter size-full wp-image-310" alt="SocrataMap10" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap10.png" width="561" height="537" /></a>

Continue to add Conditional Formatting by defining the data columns. In this example, select “All Conditions Apply,” choose “Organization Type” and “Is”, then type the category exactly as it appears in the data table (such as Public Charter Schools). For this map of schools in the CT Education Directory data table, we added several more types (Regional Schools, CT Technical High Schools, etc.) and also added a second rule to identify Magnet Schools (where Organization Type is Public Schools, and Interdistrict Schools is Yes).
<a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap11.png"><img class="aligncenter size-full wp-image-311" alt="SocrataMap11" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap11.png" width="423" height="503" /></a>

After setting all of your Conditional Formatting, press Apply at the bottom of the tab. Double-check that your visualization appears exactly as you wish, then Save As under an appropriate name. Note that your visualization will become <strong>publicly visible</strong> to other users on the Socrata open data platform, though you have the option to remove it via your individual profile view.
<a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap12.png"><img class="aligncenter size-full wp-image-312" alt="SocrataMap12" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMap12.png" width="663" height="407" /></a>

Visualizations created in the Socrata platform may be embedded on your own website, depending on your platform. Select the Embed tab to view HTML code, which can be resized. You may be able to copy and paste the HTML code directly into your website. If you use a self-hosted WordPress.org site that "strips out" HTML code, then see tutorials in this book on <a href="http://epress.trincoll.edu/dataviz/chapter/host-html-github/">how to host code on a live site (such as GitHub Pages)</a> and <a href="http://epress.trincoll.edu/dataviz/chapter/embed-iframe/">how to embed an iframe into a WordPress.org site</a>.
<p dir="ltr"><a href="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMapEmbed.jpg"><img class="aligncenter size-full wp-image-318" alt="SocrataMapEmbed" src="http://epress.trincoll.edu/dataviz/wp-content/uploads/sites/11/2014/07/SocrataMapEmbed.jpg" width="505" height="487" /></a></p>
